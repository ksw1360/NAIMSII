<UserControl x:Class="NAIMS2.Common.Views.CollectList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" Background="#FF3C3C3C" Width="1000" Loaded="UserControl_Loaded">
    <Grid Margin="10,10,10,10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 키워드 검색 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="키워드" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
            <TextBox Width="200" Height="25" x:Name="KeywordTextBox" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- 수신일자 및 버튼 -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="수신일자" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
            <Button Grid.Column="1" x:Name="OneWeekButton" Content="1주일" Width="60" Height="25" Margin="5,0" Click="OneWeekButton_Click" VerticalAlignment="Center"/>
            <Button Grid.Column="2" x:Name="OneMonthButton" Content="1개월" Width="60" Height="25" Margin="5,0" Click="OneMonthButton_Click" VerticalAlignment="Center"/>
            <DatePicker Grid.Column="3" x:Name="StartDatePicker" Width="120" Margin="0,0,10,0" VerticalAlignment="Center"/>
            <TextBlock Grid.Column="4" Text="~" VerticalAlignment="Center" Margin="5,0"/>
            <DatePicker Grid.Column="5" x:Name="EndDatePicker" Width="120" Margin="0,0,10,0" VerticalAlignment="Center"/>
            <Button Grid.Column="7" x:Name="ResetButton" Content="초기화" Width="60" Height="25" Margin="5,0" Click="ResetButton_Click" VerticalAlignment="Center"/>
            <Button Grid.Column="8" x:Name="SearchButton" Content="검색" Width="60" Height="25" Margin="5,0" Click="SearchButton_Click" VerticalAlignment="Center"/>
        </Grid>

        <!-- 탭 및 그리드 -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- TabControl 위에 라벨과 버튼 배치 -->
            <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,0,0,5">
                <TextBlock x:Name="DistributionCountLabel" Text="전체 0  선택 0" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                <Button x:Name="DistributeButton" Content="배포" Width="60" Height="25" FontSize="12" FontFamily="pretendard" Margin="0,0,5,0" VerticalAlignment="Center"/>
                <Button x:Name="CancelDistributeButton" Content="배포취소" Width="60" Height="25" FontSize="12" FontFamily="pretendard" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- 탭 컨트롤 -->
            <TabControl Grid.Column="0" Grid.ColumnSpan="2" Margin="0,35,0,5" Background="#393939" Grid.RowSpan="2">
                <TabItem>
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="수집 목록" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White" Background="#FF3C3C3C"/>
                        </StackPanel>
                    </TabItem.Header>
                    <DataGrid x:Name="CollectionDataGrid" ItemsSource="{Binding TempData}" AutoGenerateColumns="False" IsReadOnly="True" Background="White" Margin="-12,0,-10,0">
                        <DataGrid.ColumnHeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="HorizontalContentAlignment" Value="Center" />
                                <Setter Property="Foreground" Value="Gray"/>
                                <Setter Property="Background" Value="#FF3C3C3C"/>
                                <Setter Property="BorderBrush" Value="Gray"/>
                                <Setter Property="BorderThickness" Value="1,1,1,1"/>
                            </Style>
                        </DataGrid.ColumnHeaderStyle>
                        <DataGrid.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#CFEDFF"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#CFEDFF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.CellStyle>
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="" Width="30" Binding="{Binding IsSelected}" ElementStyle="{StaticResource {x:Type CheckBox}}"/>
                            <DataGridTextColumn Header="순번" Width="40" Binding="{Binding Title}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="자료명" Width="100" Binding="{Binding Email}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="전송처" Width="120" Binding="{Binding Duration}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="예상 소요 시간" Width="100" Binding="{Binding TakeTime}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!-- 소요 시간 열: ProgressBar와 퍼센트 텍스트 -->
                            <DataGridTemplateColumn Header="파일 상태" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="5,0,0,0">
                                            <TextBlock Text="{Binding Progress, StringFormat=저장 중 ({0}%)}" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                            <ProgressBar Value="{Binding Progress}" Minimum="0" Maximum="100" Width="700" Height="15" Margin="0,3,0,4" HorizontalAlignment="Left" Foreground="Black"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="배포일" Width="100" Binding="{Binding CompletedTime}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="보호기간 만료일" Width="130" Binding="{Binding protectdate}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="파일크기(kb)" Width="100" Binding="{Binding FileSize}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
                <TabItem>
                    <TabItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="배포 목록" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        </StackPanel>
                    </TabItem.Header>
                    <DataGrid x:Name="DistributionDataGrid" ItemsSource="{Binding TempData}" AutoGenerateColumns="False" IsReadOnly="True" Background="White" Margin="-12,0,-10,0">
                        <DataGrid.ColumnHeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="HorizontalContentAlignment" Value="Center" />
                                <Setter Property="Foreground" Value="Gray"/>
                                <Setter Property="Background" Value="#FF3C3C3C"/>
                                <Setter Property="BorderBrush" Value="Gray"/>
                                <Setter Property="BorderThickness" Value="1,1,1,1"/>
                            </Style>
                        </DataGrid.ColumnHeaderStyle>
                        <DataGrid.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#FF1E90FF"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#FF1E90FF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.CellStyle>
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="" Width="30" Binding="{Binding IsSelected}" ElementStyle="{StaticResource {x:Type CheckBox}}"/>
                            <DataGridTextColumn Header="순번" Width="40" Binding="{Binding Title}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="자료명" Width="100" Binding="{Binding Email}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="전송처" Width="120" Binding="{Binding Duration}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="예상 소요 시간" Width="100" Binding="{Binding TakeTime}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!-- 소요 시간 열: ProgressBar와 퍼센트 텍스트 -->
                            <DataGridTemplateColumn Header="파일 상태" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="5,0,0,0">
                                            <TextBlock Text="{Binding Progress, StringFormat=저장 중 ({0}%)}" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                            <ProgressBar Value="{Binding Progress}" Minimum="0" Maximum="100" Width="700" Height="15" Margin="0,3,0,4" HorizontalAlignment="Left" Foreground="Black"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="배포일" Width="100" Binding="{Binding CompletedTime}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="보호기간 만료일" Width="130" Binding="{Binding protectdate}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="파일크기(kb)" Width="100" Binding="{Binding FileSize}">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
            </TabControl>

            <!-- 버튼 (가로 배치) -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,31,0,0" Grid.RowSpan="2">
                <Button Content="저장매체 열기" Width="120" Height="25" FontSize="14" FontFamily="pretendard" Margin="0,0,5,0" Click="Button_Click" VerticalAlignment="Center"/>
                <Button x:Name="SettingsButton" Width="30" Height="25" ToolTip="환경설정" VerticalAlignment="Center">
                    <Path Data="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.19l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.02-0.24-0.22-0.43-0.47-0.43h-3.84 c-0.24,0-0.43,0.19-0.47,0.43L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.09-0.47-0.02-0.59,0.19L2.73,8.84 C2.62,9.04,2.67,9.31,2.85,9.45l2.03,1.58C4.84,11.33,4.82,11.65,4.82,11.97c0,0.32,0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.19l-2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.43,0.48,0.43h3.84c0.24,0,0.44-0.19,0.47-0.43l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.09,0.47,0.02,0.59-0.19l1.92-3.32c0.12-0.22,0.07-0.49-0.12-0.61L19.14,12.94z M12,16.5c-2.48,0-4.5-2.02-4.5-4.5 c0-2.48,2.02-4.5,4.5-4.5c2.48,0,4.5,2.02,4.5,4.5C16.5,14.48,14.48,16.5,12,16.5z" 
                          Fill="Black" Stretch="Uniform"/>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>